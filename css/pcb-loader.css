/* ========================================
   PCB Loader
   ======================================== */

body.pcb-loading > :not(#pcb-loader) {
  visibility: hidden;
}

#pcb-loader {
  position: fixed;
  inset: 0;
  z-index: 9999;
  background: #070e1b;
  overflow: hidden;
}

#pcb-loader > svg {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
}

.pcb-svg--mobile {
  display: none;
}

@media (max-width: 720px) {
  .pcb-svg--desktop {
    display: none;
  }

  .pcb-svg--mobile {
    display: block;
  }
}

.pcb-trace {
  fill: none;
  stroke: #2563eb;
  stroke-width: 1.1;
  stroke-linecap: round;
  stroke-linejoin: round;
  /* Prevent brief flash before JS applies stroke-dash animation state */
  opacity: 0;
}

.pcb-via {
  fill: #3b82f6;
}

.pcb-via--lg {
  fill: #60a5fa;
}

.pcb-ic {
  fill: #0d1e38;
  stroke: #3b82f6;
  stroke-width: 1.5;
}

.pcb-ic--main {
  stroke: #60a5fa;
  stroke-width: 1.9;
  filter: drop-shadow(0 0 8px rgba(59, 130, 246, 0.35)) drop-shadow(0 0 18px rgba(37, 99, 235, 0.22));
  animation: pcbCoreGlow 2.4s ease-in-out infinite;
}

.pcb-svg--desktop .pcb-ic--main {
  transform-box: fill-box;
  transform-origin: center;
  transform: scaleX(1.28);
}

.pcb-component {
  fill: #0c1929;
  stroke: #2563eb;
  stroke-width: 1.0;
}

.pcb-fuse-wire {
  fill: none;
  stroke: #60a5fa;
  stroke-width: 0.8;
  stroke-linecap: round;
  stroke-linejoin: round;
}

.pcb-label-main {
  font-family: 'JetBrains Mono', monospace;
  font-size: 34px;
  font-weight: 800;
  fill: #f8fbff;
  text-anchor: middle;
  dominant-baseline: middle;
  letter-spacing: 4px;
  filter: drop-shadow(0 0 6px rgba(239, 246, 255, 0.45)) drop-shadow(0 0 16px rgba(96, 165, 250, 0.28));
  animation: pcbLabelGlow 2s ease-in-out infinite;
}

.pcb-label-ref {
  font-family: 'JetBrains Mono', monospace;
  font-size: 9px;
  font-weight: 500;
  fill: #60a5fa;
  text-anchor: middle;
  dominant-baseline: middle;
  letter-spacing: 1px;
}

.pcb-reveal {
  opacity: 0;
  transition: opacity 0.35s ease;
}

.pcb-loading-text {
  font-family: 'JetBrains Mono', monospace;
  font-size: 13px;
  font-weight: 500;
  fill: #93c5fd;
  text-anchor: middle;
  dominant-baseline: middle;
  letter-spacing: 1.2px;
  filter: drop-shadow(0 0 6px rgba(96, 165, 250, 0.3));
  animation: pcbLoadingBreath 1.5s ease-in-out infinite;
}

.pcb-loading-dot-char {
  opacity: 0.18;
  transition: opacity 140ms linear;
}

.pcb-loading-dot {
  fill: #93c5fd;
  opacity: 0.25;
  animation: pcbDotPulse 1.1s ease-in-out infinite;
}

.pcb-loading-dot--2 {
  animation-delay: 0.18s;
}

.pcb-loading-dot--3 {
  animation-delay: 0.36s;
}

@keyframes pcbCoreGlow {
  0%, 100% {
    filter: drop-shadow(0 0 8px rgba(59, 130, 246, 0.35)) drop-shadow(0 0 18px rgba(37, 99, 235, 0.22));
  }
  50% {
    filter: drop-shadow(0 0 11px rgba(96, 165, 250, 0.5)) drop-shadow(0 0 24px rgba(37, 99, 235, 0.3));
  }
}

@keyframes pcbLabelGlow {
  0%, 100% {
    filter: drop-shadow(0 0 6px rgba(239, 246, 255, 0.45)) drop-shadow(0 0 16px rgba(96, 165, 250, 0.28));
  }
  50% {
    filter: drop-shadow(0 0 8px rgba(239, 246, 255, 0.6)) drop-shadow(0 0 22px rgba(96, 165, 250, 0.42));
  }
}

@keyframes pcbLoadingBreath {
  0%, 100% {
    opacity: 0.75;
  }
  50% {
    opacity: 1;
  }
}

@keyframes pcbDotPulse {
  0%, 100% {
    opacity: 0.2;
  }
  50% {
    opacity: 1;
  }
}

@media (max-width: 720px) {
  .pcb-svg--mobile .pcb-ic--main {
    transform: none;
  }

  .pcb-label-main {
    font-size: 31px;
    letter-spacing: 3px;
  }

  .pcb-loading-text {
    font-size: 12px;
    letter-spacing: 1px;
  }
}
